{"version":3,"mappings":"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","names":["useApp","store","useSystemStore","loaderAlerts","useLoader","breadcrumbs","computed","useRoute","route","footer","header","menus","topmenus","process","prev","current","topmenu","menu","user","UserApi.getAlerts","alerts","newAlerts","alert","commomAlerts","render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","updateServiceWorker","_reloadPage","register","Workbox","__vitePreload","event","r","e","useRegisterSW","needRefresh","ref","offlineReady","show","pwaInfo","swUrl","error","close","handleUpdateServiceWorker","initializeMeta"],"sources":["../../../src/composables/useApp.ts","../../../node_modules/@heroicons/vue/20/solid/esm/ArrowPathIcon.js","../../../node_modules/@heroicons/vue/20/solid/esm/XMarkIcon.js","../../../../@vite-plugin-pwa/virtual:pwa-register/vue","../../../src/ReloadPrompt.vue","../../../src/layouts/Default.vue"],"sourcesContent":["import { Alert, Breadcrumb, Menu, User } from '@/types';\nimport { User as UserApi } from '@/api';\nimport { computed } from 'vue';\nimport { useLoader } from '@/composables';\nimport { useRoute } from 'vue-router';\nimport { useSystemStore } from '@/store/system';\n\nexport function useApp() {\n  const store = useSystemStore();\n\n  const { loader: loaderAlerts } = useLoader<Alert[]>();\n\n  const breadcrumbs = computed(() =>\n    useRoute().matched.map(\n      (route) =>\n        ({\n          title: route.meta.title,\n          path: route.path,\n          isBeta: route.meta.isBeta,\n        } as Breadcrumb)\n    )\n  );\n\n  const footer = computed<string>(() => store.config.footer);\n\n  const header: Menu[] = [\n    { href: '/intranet/agenda.php', label: 'Agenda' },\n    { href: '/intranet/meusdados.php', label: 'Meus dados' },\n    { href: '/intranet/logof.php', label: 'Sair' },\n  ];\n\n  const menus = computed<Menu[]>(() => store.menus);\n\n  const topmenus = computed(() => {\n    const process: number = useRoute().matched.reduce(\n      (prev, current) => Number(current.meta.process) || prev,\n      0\n    );\n\n    const topmenu = store.menus.find((menu) => menu.process === process);\n\n    return topmenu ? topmenu.menus : [];\n  });\n\n  const user = computed<User | undefined>(() => store.user);\n\n  loaderAlerts(() => UserApi.getAlerts()).then((alerts) => {\n    const newAlerts = alerts.filter(\n      (alert) => !store.alerts.find((a) => a.id === alert.id)\n    );\n\n    const commomAlerts = store.alerts.filter((alert) =>\n      alerts.find((a) => a.id === alert.id)\n    );\n\n    store.alerts = [...newAlerts, ...commomAlerts];\n  });\n\n  return {\n    breadcrumbs,\n    footer,\n    header,\n    menus,\n    topmenus,\n    user,\n  };\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createElementVNode(\"path\", { d: \"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\" })\n  ]))\n}","// src/client/build/vue.ts\nimport { ref } from \"vue\";\n\n// src/client/build/register.ts\nvar autoUpdateMode = \"true\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      await (sendSkipWaitingMessage == null ? void 0 : sendSkipWaitingMessage());\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      const { Workbox } = await import(\"workbox-window\");\n      wb = new Workbox(\"/app/claims-sw.js\", { scope: \"/app/\", type: \"classic\" });\n      sendSkipWaitingMessage = async () => {\n        await (wb == null ? void 0 : wb.messageSkipWaiting());\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady == null ? void 0 : onOfflineReady();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh == null ? void 0 : onNeedRefresh();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && (onOfflineReady == null ? void 0 : onOfflineReady());\n              } else {\n                if (event.isExternal)\n                  window.location.reload();\n                else\n                  !onNeedRefreshCalled && (onOfflineReady == null ? void 0 : onOfflineReady());\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady == null ? void 0 : onOfflineReady();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n          wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/app/claims-sw.js\", r);\n        else\n          onRegistered == null ? void 0 : onRegistered(r);\n      }).catch((e) => {\n        onRegisterError == null ? void 0 : onRegisterError(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\n\n// src/client/build/vue.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  const needRefresh = ref(false);\n  const offlineReady = ref(false);\n  const updateServiceWorker = registerSW({\n    immediate,\n    onNeedRefresh() {\n      needRefresh.value = true;\n      onNeedRefresh == null ? void 0 : onNeedRefresh();\n    },\n    onOfflineReady() {\n      offlineReady.value = true;\n      onOfflineReady == null ? void 0 : onOfflineReady();\n    },\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  });\n  return {\n    updateServiceWorker,\n    offlineReady,\n    needRefresh\n  };\n}\nexport {\n  useRegisterSW\n};\n","<template>\n  <div\n    v-if=\"needRefresh\"\n    aria-live=\"assertive\"\n    class=\"z-50 pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:p-6\"\n  >\n    <div class=\"flex w-full flex-col items-center space-y-4 sm:items-end\">\n      <transition\n        enter-active-class=\"transform ease-out duration-300 transition\"\n        enter-from-class=\"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2\"\n        enter-to-class=\"translate-y-0 opacity-100 sm:translate-x-0\"\n        leave-active-class=\"transition ease-in duration-100\"\n        leave-from-class=\"opacity-100\"\n        leave-to-class=\"opacity-0\"\n      >\n        <div\n          v-if=\"show\"\n          class=\"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5\"\n        >\n          <div class=\"p-4\">\n            <div class=\"flex items-start\">\n              <div class=\"flex-shrink-0 pt-0.5\">\n                <ArrowPathIcon class=\"w-6 h-6\" />\n              </div>\n              <div class=\"ml-3 w-0 flex-1\">\n                <p class=\"text-sm font-medium text-gray-900\">\n                  {{ 'Atualização de conteúdo' }}\n                </p>\n                <p class=\"mt-1 text-sm text-gray-500\">\n                  {{\n                    'Um novo conteúdo está disponível, clique no botão abaixo para atualizar.'\n                  }}\n                </p>\n                <div class=\"mt-4 flex\">\n                  <button\n                    class=\"inline-flex items-center rounded-md bg-green-1 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-1/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-bg-green-1\"\n                    type=\"button\"\n                    @click=\"handleUpdateServiceWorker\"\n                  >\n                    Atualizar\n                  </button>\n                </div>\n              </div>\n              <div class=\"ml-4 flex flex-shrink-0\">\n                <button\n                  type=\"button\"\n                  class=\"inline-flex rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-1/90 focus:ring-offset-2\"\n                  @click=\"close\"\n                >\n                  <span class=\"sr-only\">Fechar</span>\n                  <XMarkIcon class=\"h-5 w-5\" aria-hidden=\"true\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ArrowPathIcon, XMarkIcon } from '@heroicons/vue/20/solid';\nimport { pwaInfo } from 'virtual:pwa-info';\nimport { ref } from 'vue';\nimport { useRegisterSW } from 'virtual:pwa-register/vue';\nimport { useSystemStore } from './store/system';\n\nconst show = ref(true);\n\nconst store = useSystemStore();\n\n// eslint-disable-next-line no-console\nconsole.log(pwaInfo);\n\n// replaced dyanmicaly\nconst reloadSW: unknown = '__RELOAD_SW__';\n\nconst { needRefresh, updateServiceWorker } = useRegisterSW({\n  immediate: true,\n  onRegisteredSW(swUrl, r) {\n    // eslint-disable-next-line no-console\n    console.log(`Service Worker at: ${swUrl}`);\n    if (reloadSW === 'true') {\n      r &&\n        setInterval(async () => {\n          // eslint-disable-next-line no-console\n          console.log('Checking for sw update');\n          await r.update();\n        }, 60 * 1000);\n    } else {\n      // eslint-disable-next-line no-console\n      console.log(`SW Registered: ${r}`);\n    }\n  },\n  onRegisterError(error) {\n    // eslint-disable-next-line no-console\n    console.error('Error registering service worker:', error);\n  },\n});\n\nconst close = async () => {\n  needRefresh.value = false;\n};\n\nconst handleUpdateServiceWorker = async () => {\n  store.cleanCache();\n\n  await updateServiceWorker(true);\n};\n</script>\n","<template>\n  <metainfo>\n    <template #title=\"{ content }\">{{\n      content ? `${content} · i-Educar` : 'i-Educar'\n    }}</template>\n  </metainfo>\n  <div class=\"overflow-hidden h-screen relative\">\n    <ui-header class=\"sticky top-0 z-20\" :user=\"user\" :menus=\"header\" />\n\n    <div class=\"flex justify-between\">\n      <ui-sidebar :menus=\"menus\" />\n\n      <div class=\"flex-row w-full\">\n        <ui-top-menu\n          v-if=\"!!topmenus && topmenus.length > 0\"\n          :menus=\"topmenus\"\n        />\n\n        <ui-breadcrumb :breadcrumbs=\"breadcrumbs\" />\n\n        <main\n          class=\"ieducar-content-main overflow-y-auto\"\n          style=\"height: calc(100vh - 144px)\"\n        >\n          <ui-alert />\n\n          <router-view />\n        </main>\n      </div>\n    </div>\n\n    <reload-prompt />\n\n    <ui-footer :text=\"footer\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport ReloadPrompt from '@/ReloadPrompt.vue';\nimport UiAlert from '@/components/ui/UiAlert.vue';\nimport UiBreadcrumb from '@/components/ui/UiBreadcrumb.vue';\nimport UiFooter from '@/components/ui/UiFooter.vue';\nimport UiHeader from '@/components/ui/UiHeader.vue';\nimport UiSidebar from '@/components/ui/UiSidebar.vue';\nimport UiTopMenu from '@/components/ui/UiTopMenu.vue';\nimport { initializeMeta } from 'portabilis-ui';\nimport { useApp } from '@/composables';\nimport { useRoute } from 'vue-router';\n\nconst route = useRoute();\n\nconst { breadcrumbs, footer, header, menus, topmenus, user } = useApp();\n\ninitializeMeta(route, import.meta.env.BASE_URL);\n</script>\n"],"file":"assets/Default.aukoobi7w5.js"}