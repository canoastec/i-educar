import{u as S,a as N,c as g,b as y,g as C,r as W,d as b,_ as V,e as B,f as l,o as w,h as k,i as n,j as c,w as A,t as R,k as E,T as z,p as L,l as M,m as P,n as I,q as U,s as T,v as j,F as D,x as $,y as O,z as q}from"./index.mj9lsn2oc7.js";function F(){const a=S(),{loader:i}=N(),o=g(()=>y().matched.map(t=>({title:t.meta.title,path:t.path,isBeta:t.meta.isBeta}))),s=g(()=>a.config.footer),d=[{href:"/intranet/agenda.php",label:"Agenda"},{href:"/intranet/meusdados.php",label:"Meus dados"},{href:"/intranet/logof.php",label:"Sair"}],u=g(()=>a.menus),r=g(()=>{const t=y().matched.reduce((m,p)=>Number(p.meta.process)||m,0),f=a.menus.find(m=>m.process===t);return f?f.menus:[]}),e=g(()=>a.user);return i(()=>C()).then(t=>{const f=t.filter(p=>!a.alerts.find(_=>_.id===p.id)),m=a.alerts.filter(p=>t.find(_=>_.id===p.id));a.alerts=[...f,...m]}),{breadcrumbs:o,footer:s,header:d,menus:u,topmenus:r,user:e}}const{createElementVNode:X,openBlock:H,createElementBlock:G}=W;var J=function(i,o){return H(),G("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[X("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z","clip-rule":"evenodd"})])};const{createElementVNode:K,openBlock:Q,createElementBlock:Y}=W;var Z=function(i,o){return Q(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[K("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})])},ee=J,te=Z;const se={pwaInDevEnvironment:!1,webManifest:{href:"/app/manifest.webmanifest",useCredentials:!1,linkTag:'<link rel="manifest" href="/app/manifest.webmanifest">'}};function ne(a={}){const{immediate:i=!1,onNeedRefresh:o,onOfflineReady:s,onRegistered:d,onRegisteredSW:u,onRegisterError:r}=a;let e,t,f;const m=async(_=!0)=>{await t,await(f==null?void 0:f())};async function p(){if("serviceWorker"in navigator){const{Workbox:_}=await V(()=>import("./workbox-window.prod.es5.mj9lsn2oc7.js"),[]);e=new _("/app/sw.js",{scope:"/app/",type:"classic"}),f=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let v=!1;const x=()=>{v=!0,e==null||e.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()}),o==null||o()};e.addEventListener("installed",h=>{typeof h.isUpdate>"u"?typeof h.isExternal<"u"?h.isExternal?x():!v&&(s==null||s()):h.isExternal?window.location.reload():!v&&(s==null||s()):h.isUpdate||s==null||s()}),e.addEventListener("waiting",x),e.addEventListener("externalwaiting",x)}e.register({immediate:i}).then(v=>{u?u("/app/sw.js",v):d==null||d(v)}).catch(v=>{r==null||r(v)})}}return t=p(),m}function ae(a={}){const{immediate:i=!0,onNeedRefresh:o,onOfflineReady:s,onRegistered:d,onRegisteredSW:u,onRegisterError:r}=a,e=b(!1),t=b(!1);return{updateServiceWorker:ne({immediate:i,onNeedRefresh(){e.value=!0,o==null||o()},onOfflineReady(){t.value=!0,s==null||s()},onRegistered:d,onRegisteredSW:u,onRegisterError:r}),offlineReady:t,needRefresh:e}}const oe={key:0,"aria-live":"assertive",class:"z-50 pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:p-6"},re={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},ie={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5"},le={class:"p-4"},ce={class:"flex items-start"},de={class:"flex-shrink-0 pt-0.5"},ue={class:"ml-3 w-0 flex-1"},fe=n("p",{class:"text-sm font-medium text-gray-900"},R("Atualização de conteúdo"),-1),me={class:"mt-1 text-sm text-gray-500"},pe={class:"ml-4 flex flex-shrink-0"},_e=n("span",{class:"sr-only"},"Fechar",-1),ve=B({__name:"ReloadPrompt",setup(a){const i=b(!0),o=S();console.log(se);const{needRefresh:s,updateServiceWorker:d}=ae({immediate:!0,onRegisteredSW(e,t){console.log(`Service Worker at: ${e}`),console.log(`SW Registered: ${t}`)},onRegisterError(e){console.error("Error registering service worker:",e)}}),u=async()=>{s.value=!1},r=async()=>{o.cleanCache(),await d(!0)};return(e,t)=>l(s)?(w(),k("div",oe,[n("div",re,[c(z,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[i.value?(w(),k("div",ie,[n("div",le,[n("div",ce,[n("div",de,[c(l(ee),{class:"w-6 h-6"})]),n("div",ue,[fe,n("p",me,R("Um novo conteúdo está disponível, clique no botão abaixo para atualizar."),1),n("div",{class:"mt-4 flex"},[n("button",{class:"inline-flex items-center rounded-md bg-green-1 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-1/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-bg-green-1",type:"button",onClick:r}," Atualizar ")])]),n("div",pe,[n("button",{type:"button",class:"inline-flex rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-1/90 focus:ring-offset-2",onClick:u},[_e,c(l(te),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):E("",!0)]),_:1})])])):E("",!0)}}),he={class:"overflow-hidden h-screen relative"},ge={class:"flex justify-between"},we={class:"flex-row w-full"},xe={class:"ieducar-content-main overflow-y-auto",style:{height:"calc(100vh - 144px)"}},be=B({__name:"Default",setup(a){const i=y(),{breadcrumbs:o,footer:s,header:d,menus:u,topmenus:r,user:e}=F();return L.initializeMeta(i,"/app/"),(t,f)=>{const m=$("metainfo"),p=$("router-view");return w(),k(D,null,[c(m,null,{title:A(({content:_})=>[O(R(_?`${_} · i-Educar`:"i-Educar"),1)]),_:1}),n("div",he,[c(M,{class:"sticky top-0 z-20",user:l(e),menus:l(d)},null,8,["user","menus"]),n("div",ge,[c(P,{menus:l(u)},null,8,["menus"]),n("div",we,[l(r)&&l(r).length>0?(w(),I(U,{key:0,menus:l(r)},null,8,["menus"])):E("",!0),c(T,{breadcrumbs:l(o)},null,8,["breadcrumbs"]),n("main",xe,[c(q),c(p)])])]),c(ve),c(j,{text:l(s)},null,8,["text"])])],64)}}});export{be as default};
